<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="utf-8">
	<title>eShop</title>

	<!--Bootstrap-->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">

	<!--Jquery-->
	<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4="
  	crossorigin="anonymous"></script>

  	<!--Bootstrap-->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4" crossorigin="anonymous"></script>
	
	<!--Font awesome-->
	<link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>

	<!--Animate-->
	<link rel="stylesheet" href="packages/animate.css-3.5.2/animate.min.css">

	<!-- Vue.js -->
	<script src="https://cdn.jsdelivr.net/npm/vue@2.5.17/dist/vue.js"></script>

	<script defer src='script.js'></script>
	<link href='style.css' rel='stylesheet'>

</head>
<body>
	<div id="app">
		<header class="p-3 bg-dark text-white">
		    <div class="container">
		      <div class="d-flex flex-wrap align-items-center justify-content-center justify-content-lg-start">
		        <a href="/" class="d-flex align-items-center mb-2 mb-lg-0 text-white text-decoration-none">
		          <svg class="bi me-2" width="40" height="32" role="img" aria-label="Bootstrap"><use xlink:href="#bootstrap"/></svg>
		        </a>

		        <ul class="nav col-12 col-lg-auto me-lg-auto mb-2 justify-content-center mb-md-0">
		          	<li><a href="#" class="nav-link px-2 text-secondary dropdown-toggle" href="#" id="navbarDarkDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">Товары
		          		</a>
		          		<ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="navbarDarkDropdownMenuLink">
				            <li><a class="dropdown-item" href="#">Одежда</a></li>
				            <li><a class="dropdown-item" href="#">Бытовая техника</a></li>
				            <li><a class="dropdown-item" href="#">Канцтовары</a></li>
			          	</ul>
		          	</li>
		          	<li><a href="#" class="nav-link px-2 text-white">О нас</a></li>
		          	<li><a href="#" class="nav-link px-2 text-white">Вакансии</a></li>
		          	<li><a href="#" class="nav-link px-2 text-white">Контакты</a></li>
		        </ul>

		        <form class="col-12 col-lg-auto mb-3 mb-lg-0 me-lg-3" @submit.prevent="filterGoods">
		          <input type="search" class="form-control form-control-dark  border-0 rounded-0 rounded-start search-field" placeholder="Search..." aria-label="Search" v-model="searchLine">
		          <button type="button" class="btn btn-light border-0 rounded-0 rounded-end bg-white search-btn"><i class="fad fa-search" @click="filterGoods"></i></button>
		          
		        </form>

		        <div class="text-end">
	        		<button type="button" class="btn btn-warning me-2">Войти</button>
	        		<button type="button" class="btn btn-warning me-2">Регистрация</button>
		          	<button type="button" class="btn btn-outline-light me-1">Заказы</button>
		          	<button type="button" name="basket-btn" class="btn btn-outline-light me-1" data-bs-toggle="modal" data-bs-target="#staticBackdrop">Корзина</button>
		        </div>
		      </div>
		    </div>

		    <!-- Modal -->

			<div class="modal fade text-secondary" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
			  <div class="modal-dialog">
			    <div class="modal-content">
			      <div class="modal-header">
			        <h5 class="modal-title" id="staticBackdropLabel">Корзина</h5>
			        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			      </div>
			      <div class="modal-body basket-list" v-for="product in basketGoods">
			      	<div class='basket-item'>
						<h3 class='basket-product-name'>{{ product.product_name }}</h3>
						<p class='basket-product-price'>{{ getTotalPriceForItem(product) }}</p>
						<p class='basket-product-quantity'>Количество:</p>
						<input v-bind:name="product.id_product" type="number" v-bind:value="product.quantity" @change="updateQuantity"><br><br>
						<button v-bind:name=product.id_product class="btn btn-danger btn-sm remove-basket-btn" @click="removeProductInBasket">Удалить</button>
					</div>
			      </div>
			      <p class="basket-total-price">{{ getTotalPriceInBasket() }}</p>
			      <div class="modal-footer">
			        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
			      </div>
			    </div>
			  </div>
			</div>

		    <!-- Modal -->

	  	</header>
	  	<div class='container px-4 mt-3 main-container'>
			<main>
				<div class="goods-list row-cols-lg-5 d-flex justify-content-center mb-5 flex-wrap" v-if="filteredGoods.length">
					<div class='goods-item p-3 bg-light border-warning mx-3 animated' v-for="product in filteredGoods" @mouseover="mouseOver" @mouseout="mouseOut">
						<h3 class='goods-name'>{{ product.product_name }}</h3>
						<p class='goods-price'>{{ product.price }}</p>
						<button v-bind:name="product.id_product" class="btn btn-danger btn-sm add-basket-btn" @click="addProductInBasket">В корзину</button>
					</div>
					<p class="goods-total-price">{{ getTotalPrice() }}</p>
				</div>
				<h3 class="text-center" v-else="filteredGoods.length">Нет данных</h3>

				<div v-if="basketGoods.length">
					<h2 class="text-center">Товары в корзине</h2>
					<div class="basket-list row-cols-lg-5 d-flex justify-content-center flex-wrap">
						<div class='basket-item p-3 bg-light border-warning mx-3 animated' v-for="product in basketGoods" @mouseover="mouseOver" @mouseout="mouseOut">
							<h3 class='goods-name'>{{ product.product_name }}</h3>
							<p class='goods-price'>{{ getTotalPriceForItem(product) }}</p>
							<p class='basket-product-quantity'>Количество:</p>
							<input class="mb-3 d-block" v-bind:name="product.id_product" type="number" v-bind:value="product.quantity" @change="updateQuantity">
							<button v-bind:name="product.id_product" class="btn btn-danger btn-sm remove-basket-btn" @click="removeProductInBasket">Удалить</button>
						</div>
					</div>
					<p class="position-static goods-total-price text-center">{{ getTotalPriceInBasket() }}</p>
				</div>
			</main>
		</div>
	</div>
</body>
</html>